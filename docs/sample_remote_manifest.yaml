source: sample-demo
# Serverless profile hint: package this manifest into the image and launch via the Procfile entry
#   web: uv run python -m oneiric.cli orchestrate --profile serverless --no-remote
# Recommended toggles for Cloud Run / buildpack deployments:
#   - Disable remote polling/watchers unless explicitly required (manifest bundled at build time)
#   - Prefer Secret Manager adapters â†’ env vars for configuration
entries:
  - domain: adapter
    key: remote-demo
    provider: remote
    factory: oneiric.remote.samples:demo_remote_adapter
    stack_level: 3
    priority: 25
    metadata:
      description: Remote demo adapter registered via manifest
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
        procfile_entry: "web: uv run python -m oneiric.cli orchestrate --profile serverless --no-remote"
  - domain: service
    key: remote-status
    provider: remote
    factory: oneiric.remote.samples:demo_remote_service
    stack_level: 3
    metadata:
      description: Remote demo service
  - domain: task
    key: remote-task
    provider: remote
    factory: oneiric.remote.samples:demo_remote_task
    stack_level: 3
    metadata:
      description: Remote async task handler
  - domain: event
    key: remote.event
    provider: remote
    factory: oneiric.remote.samples:demo_remote_event_handler
    stack_level: 3
    event_topics:
      - demo.user.created
      - demo.user.updated
    event_max_concurrency: 5
    event_filters:
      - path: payload.environment
        any_of: ["prod", "staging"]
    event_priority: 25
    event_fanout_policy: exclusive
    metadata:
      description: Remote event handler
  - domain: workflow
    key: remote-workflow
    provider: remote
    factory: oneiric.remote.samples:demo_remote_workflow
    stack_level: 3
    dag:
      nodes:
        - id: hydrate
          task: remote-task
        - id: notify
          task: remote-task
          depends_on:
            - hydrate
          payload:
            channel: ops
    metadata:
      description: Remote workflow definition
      scheduler:
        queue_category: queue.scheduler
        provider: cloudtasks
  - domain: action
    key: workflow.audit
    provider: builtin-workflow-audit
    factory: oneiric.actions.workflow:WorkflowAuditAction
    stack_level: 3
    metadata:
      description: Builtin workflow audit kit registered remotely
  - domain: action
    key: workflow.notify
    provider: builtin-workflow-notify
    factory: oneiric.actions.workflow:WorkflowNotifyAction
    stack_level: 3
    metadata:
      description: Builtin workflow notify kit registered remotely
      notifications:
        adapter_provider: notifications.slack
        channel: "deploy"
  - domain: action
    key: workflow.retry
    provider: builtin-workflow-retry
    factory: oneiric.actions.workflow:WorkflowRetryAction
    stack_level: 3
    metadata:
      description: Builtin workflow retry kit registered remotely
  - domain: action
    key: http.fetch
    provider: builtin-http-fetch
    factory: oneiric.actions.http:HttpFetchAction
    stack_level: 3
    metadata:
      description: HTTP fetch action with httpx backing
  - domain: action
    key: security.signature
    provider: builtin-security-signature
    factory: oneiric.actions.security:SecuritySignatureAction
    stack_level: 3
    metadata:
      description: Security signature helper action
  - domain: action
    key: data.transform
    provider: builtin-data-transform
    factory: oneiric.actions.data:DataTransformAction
    stack_level: 3
    metadata:
      description: Data transformation helper registered remotely
  - domain: action
    key: debug.console
    provider: builtin-debug-console
    factory: oneiric.actions.debug:DebugConsoleAction
    stack_level: 3
    metadata:
      description: Debug console helper action
  - domain: adapter
    key: messaging.email
    provider: sendgrid
    factory: oneiric.adapters.messaging.sendgrid:SendGridAdapter
    stack_level: 2
    metadata:
      description: SendGrid messaging adapter (defaults to sandbox mode)
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: messaging.email.mailgun
    provider: mailgun
    factory: oneiric.adapters.messaging.mailgun:MailgunAdapter
    stack_level: 2
    metadata:
      description: Mailgun email adapter with sandbox/test mode defaults
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: messaging.sms
    provider: twilio
    factory: oneiric.adapters.messaging.twilio:TwilioAdapter
    stack_level: 2
    metadata:
      description: Twilio SMS adapter (dry-run enabled by default)
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: queue.scheduler
    provider: cloudtasks
    factory: oneiric.adapters.queue.cloudtasks:CloudTasksQueueAdapter
    stack_level: 2
    metadata:
      description: Cloud Tasks queue used to trigger DAG executions
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: queue.events
    provider: pubsub
    factory: oneiric.adapters.queue.pubsub:PubSubQueueAdapter
    stack_level: 2
    metadata:
      description: Pub/Sub topic/subscription pair for event fan-out
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: notifications.slack
    provider: slack
    factory: oneiric.adapters.messaging.slack:SlackAdapter
    stack_level: 2
    metadata:
      description: Slack ChatOps adapter (chat.postMessage)
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: notifications.teams
    provider: teams
    factory: oneiric.adapters.messaging.teams:TeamsAdapter
    stack_level: 2
    metadata:
      description: Microsoft Teams incoming webhook adapter
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: notifications.webhook
    provider: webhook
    factory: oneiric.adapters.messaging.webhook:WebhookAdapter
    stack_level: 2
    metadata:
      description: Generic JSON webhook adapter for PagerDuty/Discord/etc.
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: dns.cloudflare
    provider: cloudflare
    factory: oneiric.adapters.dns.cloudflare:CloudflareDNSAdapter
    stack_level: 2
    metadata:
      description: Cloudflare DNS management adapter
      capabilities:
        - name: record.manage
        - name: record.list
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: dns.route53
    provider: route53
    factory: oneiric.adapters.dns.route53:Route53DNSAdapter
    stack_level: 2
    metadata:
      description: AWS Route53 DNS adapter
      capabilities:
        - name: record.manage
        - name: record.list
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: file_transfer.default
    provider: ftp
    factory: oneiric.adapters.file_transfer.ftp:FTPFileTransferAdapter
    stack_level: 2
    metadata:
      description: FTP file transfer adapter for artifact sync flows
      capabilities:
        - name: upload
        - name: download
        - name: delete
        - name: list
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: file_transfer.sftp
    provider: sftp
    factory: oneiric.adapters.file_transfer.sftp:SFTPFileTransferAdapter
    stack_level: 2
    metadata:
      description: SFTP adapter for secure artifact uploads
      capabilities:
        - name: upload
        - name: download
        - name: delete
        - name: list
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: file_transfer.http
    provider: http
    factory: oneiric.adapters.file_transfer.http_artifact:HTTPArtifactAdapter
    stack_level: 2
    metadata:
      description: HTTP artifact adapter with checksum validation
      capabilities:
        - name: download
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: file_transfer.scp
    provider: scp
    factory: oneiric.adapters.file_transfer.scp:SCPFileTransferAdapter
    stack_level: 2
    metadata:
      description: SCP adapter for SSH-based artifact sync
      capabilities:
        - name: upload
        - name: download
        - name: delete
        - name: list
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: file_transfer.https_upload
    provider: https-upload
    factory: oneiric.adapters.file_transfer.http_upload:HTTPSUploadAdapter
    stack_level: 2
    metadata:
      description: HTTPS upload adapter for signed artifact pushes
      capabilities:
        - name: upload
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: nosql.primary
    provider: mongodb
    factory: oneiric.adapters.nosql.mongodb:MongoDBAdapter
    stack_level: 2
    metadata:
      description: MongoDB document store for workflow/audit state
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: nosql.secondary
    provider: dynamodb
    factory: oneiric.adapters.nosql.dynamodb:DynamoDBAdapter
    stack_level: 2
    metadata:
      description: DynamoDB table backing workflow state for AWS-first deployments
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: nosql.firestore
    provider: firestore
    factory: oneiric.adapters.nosql.firestore:FirestoreAdapter
    stack_level: 2
    metadata:
      description: Firestore collection for workflow state when deploying on GCP
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: graph.neo4j
    provider: neo4j
    factory: oneiric.adapters.graph.neo4j:Neo4jGraphAdapter
    stack_level: 2
    metadata:
      description: Neo4j graph adapter for knowledge-graph workflows
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: graph.arangodb
    provider: arangodb
    factory: oneiric.adapters.graph.arangodb:ArangoDBGraphAdapter
    stack_level: 2
    metadata:
      description: ArangoDB graph adapter for multi-model workflows
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: graph.duckdb_pgq
    provider: duckdb_pgq
    factory: oneiric.adapters.graph.duckdb_pgq:DuckDBPGQAdapter
    stack_level: 2
    metadata:
      description: DuckDB PGQ adapter for in-process graph analytics
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: queue.kafka
    provider: kafka
    factory: oneiric.adapters.queue.kafka:KafkaQueueAdapter
    stack_level: 2
    metadata:
      description: Kafka topic for streaming workflows
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
  - domain: adapter
    key: queue.rabbitmq
    provider: rabbitmq
    factory: oneiric.adapters.queue.rabbitmq:RabbitMQQueueAdapter
    stack_level: 2
    metadata:
      description: RabbitMQ queue for orchestration fan-out
      serverless:
        profile: serverless
        remote_refresh_enabled: false
        watchers_enabled: false
